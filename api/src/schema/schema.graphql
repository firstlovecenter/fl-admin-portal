#Query Definitions
extend schema @authentication
type JWT @jwt {
  roles: [String!]!
}

type Query {
  currentUser(id: ID): Member!
    @cypher(
      statement: "MATCH (member:Active:Member {auth_id: $jwt.sub}) RETURN member"
      columnName: "member"
    )

  memberByEmail(email: String!): Member
    @cypher(
      statement: "MATCH (member:Active:Member {email:$email}) RETURN member LIMIT 1"
      columnName: "member"
    )
}

type PresignedUrlResponse {
  presignedUrl: String!
  publicUrl: String!
  key: String!
  expiresIn: Int!
}

type Mutation {
  CreateMemberAccount(memberId: ID!): Member!
  generatePresignedUrl(
    fileName: String!
    fileType: String!
    fileSize: Int!
  ): PresignedUrlResponse!
}
